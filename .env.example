# Environment Configuration for Vietnamese-English CS Speech Translation Project
# Copy this file to .env and fill in the values
#
# SETUP: Run .\setup.ps1 as Administrator for automated configuration

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL credentials (used by both data_factory and label_studio databases)
POSTGRES_USER=admin
POSTGRES_PASSWORD=secret_password
POSTGRES_DB=data_factory

# Connection string for Python scripts running on host (outside Docker)
# Note: Use port 5433 (external) not 5432 (internal Docker port)
DATABASE_URL=postgresql://admin:secret_password@localhost:5433/data_factory

# =============================================================================
# Label Studio Configuration
# =============================================================================
# Label Studio instance URL (for local scripts)
# Team members access via http://<server-ip>:8085
LABEL_STUDIO_URL=http://localhost:8085

# API key from Label Studio (Settings -> Account & Settings -> Access Token)
# This should be a hex string (e.g., a1b2c3d4e5f6...), NOT a JWT token
# The setup.ps1 script will auto-populate this after creating admin user
LABEL_STUDIO_API_KEY=your_access_token_here

# Project ID for unified review (transcription + translation in one interface)
LS_PROJECT_UNIFIED_REVIEW=1

# Legacy project IDs (deprecated - kept for backward compatibility)
LS_PROJECT_TRANSCRIPT=1
LS_PROJECT_TRANSLATION=2
LS_PROJECT_SEGMENTATION=3

# Webhook secret for signature verification (optional)
LABEL_STUDIO_WEBHOOK_SECRET=

# =============================================================================
# Audio Server Configuration
# =============================================================================
# URL where audio files are served (nginx container)
# Team members access via http://<server-ip>:8081
AUDIO_SERVER_URL=http://localhost:8081

# =============================================================================
# Gemini API Keys (REQUIRED for transcription/translation)
# =============================================================================
# Get your API key from: https://aistudio.google.com/app/apikey
# Multiple keys enable automatic rotation when rate-limited
GEMINI_API_KEY_1=
GEMINI_API_KEY_2=

# =============================================================================
# Sync Service Configuration
# =============================================================================
# Interval for DVC sync to Google Drive (in minutes)
SYNC_INTERVAL_MINUTES=5

# =============================================================================
# DVC Credentials (Google Drive)
# =============================================================================
# Path to Google Drive service account credentials
# For team sharing: place the credentials file at this location
# Default: ~/.cache/pydrive2fs/credentials.json
#
# How to set up DVC credentials for the team:
# 1. Get the credentials file from the project owner
# 2. Create the directory: mkdir -p ~/.cache/pydrive2fs
# 3. Copy the credentials: cp /path/to/credentials.json ~/.cache/pydrive2fs/
# 4. The sync_service container will mount this automatically
#
# Alternative: Set this environment variable to a custom path
# DVC_GDRIVE_CREDENTIALS_PATH=~/.cache/pydrive2fs

# =============================================================================
# Webhook Server Configuration
# =============================================================================
# Port for webhook server
WEBHOOK_PORT=8000

# Skip gold standard validation (set to 'true' for testing)
SKIP_GOLD_VALIDATION=false

# =============================================================================
# Quality Control Configuration
# =============================================================================
# Ratio of samples to use as gold standard (0.0 to 1.0)
GOLD_SAMPLE_RATIO=0.05
